<!doctype html>
<html lang="en">
<head>

    
    
    

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Learn Javascript - modules/modules</title>

    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/icons/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/icons/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/icons/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../assets/img/icons/favicon_io/site.webmanifest">
    <!-- <link rel="shortcut icon" type="image/x-icon" href="../assets/img/icons/favicon_io/favicon.ico"> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../assets/css/www-styles.css">

</head>

<body>




<div class="container">
    <div class="row">
        <div class="col-12 col-md-10 offset-md-1">
            <p>← <a href="../README.md">Learn Javascript</a></p>
<h1 id="javascript-modules">Javascript Modules</h1>
<p>Tutorials, references, and tips</p>
<blockquote>
<p>Modular programming is a software design technique that emphasizes separating the functionality of a program into independent, interchangeable modules, such that each contains everything necessary to execute only one aspect of the desired functionality — wikipedia</p>
</blockquote>
<h2 id="the-benefits-of-modularity">The benefits of modularity</h2>
<p>Modules are a way to split an application into separate files instead of having all of your application in one file. This concept is also present in other languages with minor differences in syntax and behavior, like C&#39;s <code>include</code>, Python&#39;s <code>import</code>, and so on. Modular design makes your application easy to understand, scale, and reuse.</p>
<h2 id="modular-design-in-node">Modular design in Node</h2>
<p>One big difference between Node.js modules and browser JavaScript is how one script&#39;s code is accessed from another script&#39;s code.</p>
<ul>
<li>In browser JavaScript, scripts are added via the <code>&lt;script&gt;</code> element. When they execute, they all have direct access to the global scope, a &quot;shared space&quot; among all scripts. Any script can freely define/modify/remove/call anything on the global scope.</li>
<li>In Node.js, each module has its own scope. A module cannot directly access things defined in another module unless it chooses to expose them. To expose things from a module, they must be assigned to <code>exports</code> or <code>module.exports</code>. For a module to access another module&#39;s <code>exports</code> or <code>module.exports</code>, it must use <code>require()</code>.</li>
</ul>
<pre><code class="language-js">// nodeColorModule.js
var exports = module.exports = {}; // create exports object
// vars and methods are private by default unless we export them
let color = &quot;&quot;,
    palette = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;];
const log = () =&gt; { console.log(`The current color is ${color}`); };
// expose color var using get and set
exports.color = function() {
    return {
        get color() { return color; },
        set color(newColor) { color = newColor; }
    };
};
// expose a method
exports.rand = () =&gt; {
    color = palette[Math.floor(Math.random() * palette.length)];
    log(color);
};

// index.js
let ColorModule = require(&#39;nodeColorModule&#39;); // import the module
ColorModule.rand(); // -&gt; &quot;green&quot;
ColorModule.rand(); // -&gt; &quot;blue&quot;
ColorModule.color = &quot;pink&quot;;
console.log(ColorModule.color); // -&gt; &quot;pink&quot;
console.log(ColorModule.palette); // -&gt; undefined
</code></pre>
<p>NPM is a package repository service that hosts published JavaScript modules. <code>npm install</code> is a command that lets you download packages from their repository. The npm cli puts all the downloaded modules in a <code>node_modules</code> directory where you ran <code>npm install</code>.</p>
<h2 id="modular-design-in-the-browser">Modular design in the browser</h2>
<p>Note that <code>require()</code>, <code>module.exports</code> and <code>exports</code> are APIs of a module system that is specific to Node.js. While browsers do not implement this module system, similar benefits can be achieved with the <a href="https://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch09s03.html">Revealing Module Pattern</a>.</p>
<h2 id="revealing-module-pattern">Revealing Module Pattern</h2>
<p>The Revealing Module Pattern is a design pattern for Javascript <em>in a web browser</em> that mimics private and public access modifiers of other languages (e.g. C# or Java). All functions and variables are hidden by default within the scope of an IIFE (immediately-invoked function expression), and exposed as needed.</p>
<pre><code class="language-js">// ColorModule.js
// add a new binding to the window object
window.ColorModule = (function() {
    // vars and methods are private by default unless we expose them
    let color = &quot;&quot;,
        palette = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;];
    const log = () =&gt; { console.log(`The current color is ${color}`); };
    // this method will be public
    function rand() {
        color = palette[Math.floor(Math.random() * palette.length)];
        log(color);
    }
    return {
        // expose method
        rand: rand,
        // expose color var using get and set
        get color() { return color; },
        set color(newColor) { color = newColor; }
    };
})();
// index.html -&gt; script src points at above file so we invoke &quot;public&quot; methods
ColorModule.rand(); // -&gt; &quot;red&quot;
ColorModule.rand(); // -&gt; &quot;green&quot;
ColorModule.color = &quot;magenta&quot;;
console.log(ColorModule.color); // -&gt; &quot;magenta&quot;
console.log(ColorModule.palette); // -&gt; undefined
</code></pre>
<h3 id="references">References</h3>
<ul>
<li>w3schools <a href="https://www.w3schools.com/js/js_object_accessors.asp">JavaScript Object Accessors</a>, <a href="https://www.w3schools.com/nodejs/nodejs_modules.asp">Node.js Modules</a></li>
<li>Zach Caceres <a href="https://gist.github.com/zcaceres/bb0eec99c02dda6aac0e041d0d4d7bf2#file-revealing-module-pattern-md">The Revealing Module Pattern in Javascript</a></li>
<li>Cheatsheets <a href="../reference-sheets/js-11-modules.pdf">Modules</a></li>
</ul>

        </div>
    </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

</body>
</html>
